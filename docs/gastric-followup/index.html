<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="content-language" content="en-us">
  <title>Gastric Cancer Follow-up Planning (li-th.)</title>
  <link rel="stylesheet" href="https://yang-z-03.github.io/css/blank.css">
  <link rel="stylesheet" href="https://yang-z-03.github.io/docs/gastric-followup/forms.css">
</head>

<body>
  <div align="right">
    <a href="https://yang-z-03.github.io">yang-z-03.github.io</a> 
  </div>
  <p class="title" style="margin-bottom: 1cm;">
    Follow-up Arrangement for Gastric Cancer Patients
  </p>

  <div style="display: flex; flex-direction: row; margin: 30px 0;">

    <form action="" name="scoring" method="get" class="scoring-form">
      
      <div class="scoring-combo">
        <label for="location">Tumor location</label>
        <select id="location" name="location" style="width: 220px;" onchange="update();">
          <option value="upper">Upper Gastric</option>
          <option value="middle">Middle Gastric</option>
          <option value="lower">Lower Gastric</option>
        </select>
      </div>

      <div class="scoring-combo">
        <label for="ctnm">cTNM staging</label>
        <select id="ctnm" name="ctnm" style="width: 220px;" onchange="update();">
          <option value="2">Stage II </option>
          <option value="3">Stage III </option>
        </select>
      </div>

      <div class="scoring-combo">
        <label for="yptnm">ypTNM staging</label>
        <select id="yptnm" name="yptnm" style="width: 220px;" onchange="update();">
          <option value="0">No tumor </option>
          <option value="1">Stage I </option>
          <option value="2">Stage II </option>
          <option value="3">Stage III </option>
        </select>
      </div>

      <div class="scoring">
        <input type="range" id="age" name="age" min="1" max="120" value="50" onchange="update();">
        <label for="age" id="age-label">Age (50)</label>
      </div>
      
      <div class="scoring">
        <input type="checkbox" id="residual" name="residual" onchange="update();">
        <label for="residual">Residual positive</label>
      </div>

      <div class="scoring">
        <input type="checkbox" id="vascular" name="vascular" onchange="update();">
        <label for="vascular">Vascular invasion</label>
      </div>

      <div class="scoring">
        <input type="checkbox" id="perineu" name="perineu" onchange="update();">
        <label for="perineu">Perineural invasion</label>
      </div>

      <div class="scoring">
        <input type="checkbox" id="signet" name="signet" onchange="update();">
        <label for="signet">Signet ring carcinoma</label>
      </div>

      <div class="scoring">
        <input type="checkbox" id="ypn" name="ypn" onchange="update();">
        <label for="ypn">ypN+</label>
      </div>

    </form>

    <div class="risk-result">
      <p style="margin-left: 50px;" id="risk-str">Risk strata 0, Level 0</p>
      <table style="margin-left: 50px;">
        <th>
          <td colspan="12" style="text-align: center;">Year 1</td>
        </th>
        <tr>
          <th>Month</th>
          <td>1</td>
          <td>2</td>
          <td>3</td>
          <td>4</td>
          <td>5</td>
          <td>6</td>
          <td>7</td>
          <td>8</td>
          <td>9</td>
          <td>10</td>
          <td>11</td>
          <td>12</td>
        </tr>
        <tr>
          <th>Arrangement</th>
          <td id="a1"></td>
          <td id="a2"></td>
          <td id="a3"></td>
          <td id="a4"></td>
          <td id="a5"></td>
          <td id="a6"></td>
          <td id="a7"></td>
          <td id="a8"></td>
          <td id="a9"></td>
          <td id="a10"></td>
          <td id="a11"></td>
          <td id="a12"></td>
        </tr>
      </table>

      <table style="margin-left: 50px;">
        <th>
          <td colspan="12" style="text-align: center;">Year 2</td>
        </th>
        <tr>
          <th>Month</th>
          <td>1</td>
          <td>2</td>
          <td>3</td>
          <td>4</td>
          <td>5</td>
          <td>6</td>
          <td>7</td>
          <td>8</td>
          <td>9</td>
          <td>10</td>
          <td>11</td>
          <td>12</td>
        </tr>
        <tr>
          <th>Arrangement</th>
          <td id="a13"></td>
          <td id="a14"></td>
          <td id="a15"></td>
          <td id="a16"></td>
          <td id="a17"></td>
          <td id="a18"></td>
          <td id="a19"></td>
          <td id="a20"></td>
          <td id="a21"></td>
          <td id="a22"></td>
          <td id="a23"></td>
          <td id="a24"></td>
        </tr>
      </table>

      <table style="margin-left: 50px;">
        <th>
          <td colspan="12" style="text-align: center;">Year 3</td>
        </th>
        <tr>
          <th>Month</th>
          <td>1</td>
          <td>2</td>
          <td>3</td>
          <td>4</td>
          <td>5</td>
          <td>6</td>
          <td>7</td>
          <td>8</td>
          <td>9</td>
          <td>10</td>
          <td>11</td>
          <td>12</td>
        </tr>
        <tr>
          <th>Arrangement</th>
          <td id="a25"></td>
          <td id="a26"></td>
          <td id="a27"></td>
          <td id="a28"></td>
          <td id="a29"></td>
          <td id="a30"></td>
          <td id="a31"></td>
          <td id="a32"></td>
          <td id="a33"></td>
          <td id="a34"></td>
          <td id="a35"></td>
          <td id="a36"></td>
        </tr>
      </table>

      <table style="margin-left: 50px;">
        <th>
          <td colspan="12" style="text-align: center;">Year 4</td>
        </th>
        <tr>
          <th>Month</th>
          <td>1</td>
          <td>2</td>
          <td>3</td>
          <td>4</td>
          <td>5</td>
          <td>6</td>
          <td>7</td>
          <td>8</td>
          <td>9</td>
          <td>10</td>
          <td>11</td>
          <td>12</td>
        </tr>
        <tr>
          <th>Arrangement</th>
          <td id="a37"></td>
          <td id="a38"></td>
          <td id="a39"></td>
          <td id="a40"></td>
          <td id="a41"></td>
          <td id="a42"></td>
          <td id="a43"></td>
          <td id="a44"></td>
          <td id="a45"></td>
          <td id="a46"></td>
          <td id="a47"></td>
          <td id="a48"></td>
        </tr>
      </table>

      <table style="margin-left: 50px;">
        <th>
          <td colspan="12" style="text-align: center;">Year 5</td>
        </th>
        <tr>
          <th>Month</th>
          <td>1</td>
          <td>2</td>
          <td>3</td>
          <td>4</td>
          <td>5</td>
          <td>6</td>
          <td>7</td>
          <td>8</td>
          <td>9</td>
          <td>10</td>
          <td>11</td>
          <td>12</td>
        </tr>
        <tr>
          <th>Arrangement</th>
          <td id="a49"></td>
          <td id="a50"></td>
          <td id="a51"></td>
          <td id="a52"></td>
          <td id="a53"></td>
          <td id="a54"></td>
          <td id="a55"></td>
          <td id="a56"></td>
          <td id="a57"></td>
          <td id="a58"></td>
          <td id="a59"></td>
          <td id="a60"></td>
        </tr>
      </table>
    </div>
  </div>

  <hr>
  <div>
    you are at: <a href="/#">root</a> /
    <a href="/docs/gastric-followup/index.html">gastric cancer follow-up</a>
  </div>
  <hr>

  <p class="small">Last updated: Apr. 2025</p>

  <script>
    update = function() {
      var form = document.forms["scoring"];
      var ctnm = form.ctnm.value;
      var yptnm = form.yptnm.value;
      var location = form.location.value;
      var age = form.age.value;
      var is_vascular = form.vascular.checked;
      var is_nerve = form.perineu.checked;
      var is_signet = form.signet.checked;
      var is_ypn = form.ypn.checked;
      var is_residual = form.residual.checked;

      var plan = {
        1: [3, 8, 13, 18, 23, 28, 37, 48, 60],
        2: [3, 7, 10, 13, 17, 21, 27, 37, 45, 60],
        3: [1, 3, 6, 8, 10, 13, 15, 18, 21, 25, 31, 46, 60]
      }

      var groups = {
        25:1, 39:1, 9:1, 38:1, 16:1, 31:1, 32:1, 10:1, 17:1, 21:1, 7:1, 24:1, 6:1, 13:1,
        14:2, 34:2, 44:2, 22:2, 35:2, 52:2, 45:2,
        40:3, 50:3, 49:3, 53:3, 26:3, 46:3
      }

      strat = 0;
      if (is_ypn) {
        if (yptnm == '3') {
          if (is_vascular) {
            if (age > 55) {
              if (ctnm == '3') strat = 53
              else strat = 52
            } else {
              if (ctnm == '3') strat = 50
              else strat = 49
            }
          } else {
            if (location == 'middle') {
              strat = 46
            } else {
              if (is_nerve) strat = 45
              else strat = 44
            }
          }
        } else {
          if (age > 68) {
            if (is_residual) strat = 40
            else {
              if (is_signet) strat = 39
              else strat = 38
            }
          } else {
            if (ctnm == '3') {
              if (is_nerve) strat = 35
              else strat = 34
            } else {
              if (is_nerve) strat = 32
              else strat = 31
            }
          }
        }
      } else {
        if (is_vascular) {
          if (is_residual) strat = 26
          else {
            if (age > 68) {
              if (location == 'middle') strat = 25
              else strat = 24
            } else {
              if (is_signet) strat = 22
              else strat = 21
            }
          }
        } else {
          if (ctnm == '3') {
            if (location == 'lower') {
              if (is_nerve) strat = 14
              else strat = 13
            } else {
              if (is_signet) strat = 17
              else strat = 16
            }
          } else {
            if (is_nerve) {
              if (age > 51) strat = 10
              else strat = 9
            } else {
              if (is_signet) strat = 7
              else strat = 6
            }
          }
        }
      }

      document.getElementById("age-label").innerHTML = 'Age (' + age + ')'
      grouping = groups[strat]

      str_group = 'Level ' + grouping
      if (grouping == 1) { str_group += ' (Low risk)' }
      else if (grouping == 2) { str_group += ' (Medium risk)' }
      else if (grouping == 3) { str_group += ' (High risk)' }
      document.getElementById("risk-str").innerHTML = str_group
      
      for (i = 1; i <= 60; i += 1) {
        document.getElementById("a" + i).innerHTML = ''
      }
      for (i = 0; i < plan[grouping].length; i += 1) {
        document.getElementById("a" + plan[grouping][i]).innerHTML = 'x'
      }
    }

    document.addEventListener("DOMContentLoaded", function(event) {
      update();
    });
  </script>
</body>
